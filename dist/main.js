(()=>{"use strict";const e=class{execute(){return+this.num}undo(){return+this.num}};class t extends e{constructor(e){super(),this.num=e}execute(e){return+this.num+ +e}undo(e){return+e-+this.num}}class r extends e{constructor(e){super(),this.num=e}execute(e){return+this.num-+e}undo(e){return+e+ +this.num}}class u extends e{constructor(e){super(),this.num=e}execute(e){return+this.num*+e}undo(e){return+e/+this.num}}class n extends e{constructor(e){super(),this.num=e}execute(e){return+this.num/+e}undo(e){return+e*+this.num}}const s=class extends e{constructor(e){super(),this.num=e}execute(e){return this.num**e}},c=class extends e{constructor(e){super(),this.num=e}execute(e){return 1==+e||1==+this.num?1:this.num**(1/e)}};class a{constructor(e){this.sign=e}static list={add:t,substract:r,mult:u,divide:n,"degree-y":s,"root-y":c};create(e,t){const r=new(0,a.list[t])(e);return r.sign=this.sign,r}}const o=a,m=class extends e{execute(e){return e*e}},i=class extends e{execute(e){return e*e*e}},d=class extends e{execute(e){return 1==+e?1:e**.5}},x=class extends e{execute(e){return 1==+e?1:e**(1/3)}};class h{execute(e){e.prevNum=e.currentNum,e.currentNum=""}}class l{execute(e){e.currentNum=""}}class N{execute(e,t){const r=document.querySelector(".record-data-block").textContent;if("."!==e||!r.includes(".")){if(""!==g.currentNum&&""!==g.prevNum&&void 0===g.operation.execute)return t.prevNum="",void(t.currentNum=e);t.currentNum+=e,"."!==e&&(t.currentNum=Number(t.currentNum))}}}class p{constructor(){this.currentOperand=document.querySelector(".record-data-block"),this.prevOperand=document.querySelector(".prev-data-block")}execute(e){this.currentOperand.textContent=e.currentNum,this.prevOperand.textContent=`${e.prevNum} ${e.operation.sign}`}}const g=new class{constructor(){this.currentNum=0,this.prevNum="",this.memory=new class{memNum=0;add(e){return this.memNum+=+e,this.memNum}substr(e){return this.memNum-=+e,this.memNum}recall(){return this.memNum}clear(){this.memNum=0}},this.operation={sign:""},this.history=[]}executeCommand(e){return this.history.push(e),""===this.currentNum&&(this.currentNum=this.prevNum),this.prevNum=e.execute(this.currentNum),this.currentNum=e.execute(this.currentNum),this.operation={sign:""},this}},b=document.querySelector(".m-btns"),w=document.querySelector(".btns");b.addEventListener("click",(e=>{const t=document.querySelector(".record-data-block"),r=document.querySelector(".mem-data-block");r.textContent="M",e.target.hasAttribute("data-memory-clear")&&(g.memory.clear(),r.textContent=""),e.target.hasAttribute("data-memory-add")&&g.memory.add(t.textContent),e.target.hasAttribute("data-memory-substr")&&g.memory.substr(t.textContent),e.target.hasAttribute("data-memory-recall")&&(t.textContent=g.memory.recall(),(new N).execute(t.textContent,g))})),w.addEventListener("click",(e=>{if(e.target.hasAttribute("data-num")&&((new N).execute(e.target.textContent,g),(new p).execute(g)),e.target.hasAttribute("data-operation")){if(isNaN(document.querySelector(".record-data-block").textContent))return;if(void 0!==g.operation.execute)return g.executeCommand(g.operation),g.operation=new o(e.target.getAttribute("data-value")).create(g.prevNum,e.target.id),(new l).execute(g),void(new p).execute(g);(new h).execute(g),g.operation=new o(e.target.getAttribute("data-value")).create(g.prevNum,e.target.id),(new l).execute(g),(new p).execute(g)}if(e.target.hasAttribute("data-equal")){if(console.log("data-equal"),void 0===g.operation.execute)return;g.executeCommand(g.operation),(new p).execute(g)}e.target.hasAttribute("data-clear-all")&&((new class{execute(e){e.currentNum=0,e.prevNum="",e.operation={sign:""}}}).execute(g),(new p).execute(g)),e.target.hasAttribute("data-clear-entry")&&((new class{execute(e){e.currentNum=0}}).execute(g),(new p).execute(g)),e.target.hasAttribute("data-degree2")&&(g.executeCommand(new m),(new p).execute(g)),e.target.hasAttribute("data-degree3")&&(g.executeCommand(new i),(new p).execute(g)),e.target.hasAttribute("data-root2")&&(g.executeCommand(new d),(new p).execute(g)),e.target.hasAttribute("data-root3")&&(g.executeCommand(new x),(new p).execute(g))}))})();