(()=>{class t{constructor(){this.currentOperand=document.querySelector(".record-data-block"),this.prevOperand=document.querySelector(".prev-data-block")}execute(t){this.currentOperand.textContent=t.currentNum,this.prevOperand.textContent=t.prevNum}}class e{execute(t,e){const r=document.querySelector(".record-data-block").textContent;"."===t&&r.includes(".")||(""!==e.operation.sign&&""===e.prevNum&&(e.prevNum=e.currentNum,e.currentNum=""),e.currentNum+=t)}}class r{constructor(t){this.num=t}execute(t){return+this.num+ +t}undo(t){return+this.num-+t}}class n{constructor(t){this.num=t}execute(t){return+this.num-+t}undo(t){return+this.num+ +t}}class u{constructor(t){this.num=t}execute(t){return+this.num*+t}undo(t){return+this.num/+t}}class c{constructor(t){this.num=t}execute(t){return+this.num/+t}undo(t){return+this.num*+t}}class s{constructor(t){this.sign=t}static list={add:r,substract:n,mult:u,divide:c};create(t,e){const r=new(0,s.list[e])(t);return r.sign=this.sign,r}}const o=document.querySelectorAll("[data-num]"),i=document.querySelectorAll("[data-operation]"),m=new class{constructor(){this.currentNum="",this.prevNum="",this.memoryNum="",this.operation={sign:""},this.history=[]}executeCommand(e){return this.history.push(e),this.prevNum=e.execute(this.currentNum),this.currentNum="",this.operation={sign:""},(new t).execute(this),this}undoCommand(){const e=this.history.pop();this.currentNum=e.execute(this.currentNum),(new t).execute(this.currentNum,"")}};o.forEach((r=>{r.addEventListener("click",(()=>{(new e).execute(r.textContent,m),(new t).execute(m)}))})),i.forEach((t=>{t.addEventListener("click",(()=>{if(void 0!==m.operation.execute)return m.executeCommand(m.operation),void(m.operation=new s(t.textContent).create(m.prevNum,t.id));m.operation=new s(t.textContent).create(m.currentNum,t.id)}))}))})();