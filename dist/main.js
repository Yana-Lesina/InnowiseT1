(()=>{class e{constructor(){this.currentOperand=document.querySelector(".record-data-block"),this.prevOperand=document.querySelector(".prev-data-block")}execute(e){this.currentOperand.textContent=e.currentNum,this.prevOperand.textContent=e.prevNum}}class t{execute(e,t){const r=document.querySelector(".record-data-block").textContent;"."===e&&r.includes(".")||(""!==t.operation.sign&&""===t.prevNum&&(t.prevNum=t.currentNum,t.currentNum=""),t.currentNum+=e)}}class r{constructor(e){this.num=e}execute(e){return+this.num+ +e}}class n{constructor(e){this.num=e}execute(e){return+this.num-+e}}class c{constructor(e){this.num=e}execute(e){return e}}class u{constructor(e){this.sign=e}static list={add:r,substract:n,equal:c};create(e,t){const r=new(0,u.list[t])(e);return r.sign=this.sign,r}}const s=document.querySelectorAll("[data-num]"),o=document.querySelectorAll("[data-operation]"),i=new class{constructor(){this.currentNum="",this.prevNum="",this.memoryNum="",this.operation={sign:""},this.history=[]}executeCommand(t){return this.history.push(t),this.prevNum=t.execute(this.currentNum),this.currentNum="",this.operation={sign:""},(new e).execute(this),this}undoCommand(){const t=this.history.pop();this.currentNum=t.execute(this.currentNum),(new e).execute(this.currentNum,"")}};s.forEach((r=>{r.addEventListener("click",(()=>{(new t).execute(r.textContent,i),(new e).execute(i),console.log(i)}))})),o.forEach((r=>{r.addEventListener("click",(()=>{void 0!==i.operation.execute&&i.executeCommand(i.operation),(new t).execute("",i),(new e).execute(i),console.log(i),i.operation=new u(r.textContent).create(i.currentNum,r.id),console.log(i)}))}))})();