(()=>{"use strict";const e=class{execute(){return+this.num}undo(){return+this.num}};class t extends e{constructor(e){super(),this.num=e}execute(e){return+this.num+ +e}undo(e){return+e-+this.num}}class r extends e{constructor(e){super(),this.num=e}execute(e){return+this.num-+e}undo(e){return+e+ +this.num}}class n extends e{constructor(e){super(),this.num=e}execute(e){return+this.num*+e}undo(e){return+e/+this.num}}class u extends e{constructor(e){super(),this.num=e}execute(e){return+this.num/+e}undo(e){return+e*+this.num}}const c=class extends e{constructor(e){super(),this.num=e}execute(e){return this.num**e}};class s{constructor(e){this.sign=e}static list={add:t,substract:r,mult:n,divide:u,"degree-y":c};create(e,t){const r=new(0,s.list[t])(e);return r.sign=this.sign,r}}const o=s,i=class extends e{execute(e){return e*e}},a=class extends e{execute(e){return e*e*e}};class d{constructor(){this.currentOperand=document.querySelector(".record-data-block"),this.prevOperand=document.querySelector(".prev-data-block")}execute(e){this.currentOperand.textContent=e.currentNum,this.prevOperand.textContent=`${e.prevNum} ${e.operation.sign}`}}class m{execute(e,t){const r=document.querySelector(".record-data-block").textContent;if(!("."===e&&r.includes(".")||"0"===e&&""===t.currentNum))return""!==h.currentNum&&""!==h.prevNum&&void 0===h.operation.execute?(t.prevNum="",void(t.currentNum=e)):void(t.currentNum+=e)}}class l{execute(e){e.prevNum=e.currentNum,e.currentNum=""}}class x{execute(e){e.currentNum=""}}const h=new class{constructor(){this.currentNum="",this.prevNum="",this.memoryNum="",this.operation={sign:""},this.history=[]}executeCommand(e){return this.history.push(e),this.prevNum=e.execute(this.currentNum),this.currentNum=e.execute(this.currentNum),this.operation={sign:""},this}undoCommand(){const e=this.history.pop();return this.currentNum=e.undo(this.prevNum),this.prevNum=e.undo(this.prevNum),this.operation={sign:""},this}},p=document.querySelectorAll("[data-num]"),v=document.querySelectorAll("[data-operation]"),N=document.querySelector("[data-equal]"),w=document.querySelector("[data-clear-all]"),g=document.querySelector("[data-clear-entry]"),y=document.querySelector("[data-undo]"),q=document.querySelector(".btns");p.forEach((e=>{e.addEventListener("click",(()=>{(new m).execute(e.textContent,h),(new d).execute(h)}))})),v.forEach((e=>{e.addEventListener("click",(()=>{if(void 0!==h.operation.execute)return h.executeCommand(h.operation),h.operation=new o(e.getAttribute("data-value")).create(h.prevNum,e.id),(new x).execute(h),void(new d).execute(h);(new l).execute(h),h.operation=new o(e.getAttribute("data-value")).create(h.prevNum,e.id),(new x).execute(h),(new d).execute(h)}))})),N.addEventListener("click",(()=>{h.executeCommand(h.operation),(new d).execute(h)})),w.addEventListener("click",(()=>{(new class{execute(e){e.currentNum="",e.prevNum="",e.operation={sign:""}}}).execute(h),(new d).execute(h)})),g.addEventListener("click",(()=>{(new class{execute(e){e.currentNum=""}}).execute(h),(new d).execute(h)})),y.addEventListener("click",(()=>{h.undoCommand(h.operation),(new d).execute(h),(new x).execute(h)})),q.addEventListener("click",(e=>{e.target.hasAttribute("data-degree2")&&(console.log("degree-2"),h.executeCommand(new i),(new d).execute(h)),e.target.hasAttribute("data-degree3")&&(console.log("degree-3"),h.executeCommand(new a),(new d).execute(h))}))})();