(()=>{"use strict";const e=class{constructor(e){this.num=e}execute(e){return+this.num+ +e}undo(e){return+this.num-+e}};class t extends e{execute(e){return+this.num+ +e}undo(e){return+e-+this.num}}class n extends e{execute(e){return+this.num-+e}undo(e){return+e+ +this.num}}class r extends e{execute(e){return+this.num*+e}undo(e){return+e/+this.num}}class u extends e{execute(e){return+this.num/+e}undo(e){return+e*+this.num}}class c{constructor(e){this.sign=e}static list={add:t,substract:n,mult:r,divide:u};create(e,t){const n=new(0,c.list[t])(e);return n.sign=this.sign,n}}const s=c;class o{constructor(){this.currentOperand=document.querySelector(".record-data-block"),this.prevOperand=document.querySelector(".prev-data-block")}execute(e){this.currentOperand.textContent=e.currentNum,this.prevOperand.textContent=`${e.prevNum} ${e.operation.sign}`}}class i{execute(e,t){const n=document.querySelector(".record-data-block").textContent;if(!("."===e&&n.includes(".")||"0"===e&&""===t.currentNum))return""!==m.currentNum&&""!==m.prevNum&&void 0===m.operation.execute?(t.prevNum="",void(t.currentNum=e)):void(t.currentNum+=e)}}class a{execute(e){e.prevNum=e.currentNum,e.currentNum=""}}class d{execute(e){e.currentNum=""}}const m=new class{constructor(){this.currentNum="",this.prevNum="",this.memoryNum="",this.operation={sign:""},this.history=[]}executeCommand(e){return this.history.push(e),this.prevNum=e.execute(this.currentNum),this.currentNum=e.execute(this.currentNum),this.operation={sign:""},this}undoCommand(){const e=this.history.pop();return this.currentNum=e.undo(this.prevNum),this.prevNum=e.undo(this.prevNum),this.operation={sign:""},this}},l=document.querySelectorAll("[data-num]"),h=document.querySelectorAll("[data-operation]"),x=document.querySelector("[data-operation-equal]"),p=document.querySelector("[data-clear-all]"),N=document.querySelector("[data-clear-entry]"),v=document.querySelector("[data-undo]");l.forEach((e=>{e.addEventListener("click",(()=>{(new i).execute(e.textContent,m),(new o).execute(m)}))})),h.forEach((e=>{e.addEventListener("click",(()=>{if(void 0!==m.operation.execute)return m.executeCommand(m.operation),m.operation=new s(e.textContent).create(m.prevNum,e.id),(new d).execute(m),void(new o).execute(m);(new a).execute(m),m.operation=new s(e.textContent).create(m.prevNum,e.id),(new d).execute(m),(new o).execute(m)}))})),x.addEventListener("click",(()=>{m.executeCommand(m.operation),(new o).execute(m)})),p.addEventListener("click",(()=>{(new class{execute(e){e.currentNum="",e.prevNum="",e.operation={sign:""}}}).execute(m),(new o).execute(m)})),N.addEventListener("click",(()=>{(new class{execute(e){e.currentNum=""}}).execute(m),(new o).execute(m)})),v.addEventListener("click",(()=>{m.undoCommand(m.operation),(new o).execute(m),(new d).execute(m)}))})();